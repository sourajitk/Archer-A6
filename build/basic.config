#
# Basic var for special product
#

# Git path
SDK_DIR:=$(BUILD_DIR)/../mtk_ApSoC_5050
TOOLCHAIN_DIR:=$(SDK_DIR)/toolchain

export TOOLCHAIN_DIR
# CHIPS
INCLUDE_CPU_MT7621=y
INCLUDE_MTD_TYPE2=y
INCLUDE_WIFI_5G_CHIP_MT7615E=y
INCLUDE_SWITCH_MT7621=y

CPU_TYPE=mt7621
MTD_PART_TYPE = 2
MTD_FLASH_SIZE = 0x800000
KERNEL_MAX_SIZE="0x140000"
ROOTFS_BLOCK_SIZE="128k"

IMAGE_REGION=EU

# flash image no need to do ecc process by make flash tools
HOSTTOOL_CFLAGS += CONFIG_MKFLASH_NO_ECC=y

DFLAGS += -DINCLUDE_CPU_MT7621
DFLAGS += -DINCLUDE_SWITCH_MT7621
DFLAGS += -DINCLUDE_MTD_TYPE2
DFLAGS += -DINCLUDE_WIFI_5G_CHIP_MT7615E

# Tools
HOSTTOOLS_DIR:=$(BUILD_DIR)/hostTools/make_flash_nand/bin
HOSTTOOLS_SRC_DIR:=$(BUILD_DIR)/hostTools/make_flash_nand/src
RELEASETOOL_DIR:=$(BUILD_DIR)/../utils/release/

# Toolchain
TOOLCHAIN_NAME:=buildroot-gcc463
TOOLCHAIN_PACKAGE:=$(TOOLCHAIN_NAME)_32bits.tar.bz2
TOOLCHAIN_ROOT_DIR:=$(TOOLCHAIN_DIR)/$(TOOLCHAIN_NAME)
TOOLCHAIN_PREFIX:=mipsel-linux-
HOST = mipsel-linux
TOOLCHAIN_LIB_PATH:=$(TOOLCHAIN_ROOT_DIR)/usr/mipsel-buildroot-linux-uclibc/sysroot/lib
# export TOOLCHAIN_ROOT_DIR_UNIQ to pass variables to make package/toolchain
TOOLCHAIN_ROOT_DIR_UNIQ:=$(TOOLCHAIN_DIR)/$(TOOLCHAIN_NAME)
export TOOLCHAIN_ROOT_DIR_UNIQ


# UBOOT Toolchain
UBOOT_TOOLCHAIN_NAME:=mips-2012.03
UBOOT_TOOLCHAIN_PACKAGE:=$(UBOOT_TOOLCHAIN_NAME).tar.bz2
UBOOT_TOOLCHAIN_ROOT_DIR:=$(TOOLCHAIN_DIR)/$(UBOOT_TOOLCHAIN_NAME)
UBOOT_TOOLCHAIN_COMPILER_PATH:=$(TOOLCHAIN_DIR)/$(UBOOT_TOOLCHAIN_NAME)/bin/


# SDK
SDK_NAME:=mtk_ApSoC_5050
SDK_ROOT_DIR:=$(SDK_DIR)
SDK_BUILD_DIR:=$(SDK_ROOT_DIR)/linux-3.10.14.x
SDK_TOOLS_PATH:=$(SDK_ROOT_DIR)/tools
SDK_BIN_DIR:=$(SDK_ROOT_DIR)/linux-3.10.14.x
SDK_KERNEL_DIR:=$(SDK_ROOT_DIR)/linux-3.10.14.x
# SDK_ROOTFS_DIR:=$(SDK_BIN_DIR)/modules

KERNELVERSION = 3.10.14+
INSTALL_MOD_PATH = $(SDK_KERNEL_DIR)/../
ROOTFSTOOLS = $(SDK_TOOLS_PATH)/mksquashfs4.2

SDK_FLAGS:=LINUX_VERSION=2_6_36 PLT=mips ARCH=mips

# CFE
#set CFE nvrammanager params according to iplatform.config
CONFIG_PACKAGE_NM_PTN_TABLE_BASE?=
CONFIG_PACKAGE_NM_FLASH_SIZE?=0x0800000
CONFIG_PACKAGE_NM_PTN_NUM_MAX?=

UBOOT_BUILD_DIR:=$(SDK_ROOT_DIR)/Uboot



# FACTORY CFE
FACTORY_BUILD_DIR:=$(SDK_ROOT_DIR)/Uboot
FACTORY_FLAGS:=FACTORY_UBOOT=y


# export
export ARCH=mips
export LANG="en_US"
SDK_LINUX_VERSION:=3.10.108
export SDK_LINUX_VERSION

#export ORIGINAL_PATH:=$(PATH)
#export PATH:=$(ORIGINAL_PATH):$(TOOLCHAIN_ROOT_DIR)/usr/bin:$(SDK_TOOLS_PATH)
#export LD_LIBRARY_PATH:=$(TOOLCHAIN_ROOT_DIR)/usr/mipsel-buildroot-linux-uclibc/sysroot/lib

#export CROSS_COMPILE=$(TOOLCHAIN_PREFIX)

###for uboot compile
HOST_FS_PATH=$(TOOLCHAIN_DIR)
TOOLCHAIN_PATH:=$(HOST_FS_PATH)/$(TOOLCHAIN_NAME)
TOOLPREFIX_NAME = usr/bin/mipsel-linux-
TOOLPREFIX:=$(TOOLCHAIN_PATH)/$(TOOLPREFIX_NAME)
#CC = $(TOOLPREFIX)gcc
#LD = $(TOOLPREFIX)ld
#AR = $(TOOLPREFIX)ar
#STRIP = $(TOOLPREFIX)strip
#RANLIB = $(TOOLPREFIX)ranlib
export TOOLPREFIX
#export CC
#export LD
#export AR
#export STRIP
#export RANLIB
export PATH := $(TOOLCHAIN_PATH)/usr/bin:$(PATH)

export MODEL_FS_PATH
export OS_LIB_PATH
export HOST_FS_PATH

export HOST_TOOLS_PATH

export TOOLCHAIN_PATH

####end uboot


unexport TC_CFLAGS
TC_CFLAGS += -DTCSUPPORT_IGMPSNOOPING_ENHANCE
export TC_CFLAGS


export KERNELVERSION


# Firmware
TOOLS_PATH = $(BUILD_DIR)/hostTools
FAKEROOT_PATH = $(TOOLS_PATH)/fakeroot
ROOTFSTOOL_NAME = "squashfs"

# Iplatform
TARGET_BOARD:="model_mtk_mt762x"
TARGET_NAME:="mipsel-openwrt-linux-uclibc"
IPF_ROOTFS_DIR:=$(PLATFORM_DIR)/build_dir/target-$(TARGET_NAME)-$(PRODUCT_NAME)/root-$(TARGET_BOARD)

# Flash make
FLASH_MAKER_DIR:=$(CONFIG_DIR)/FlashMaker
MAKEFLASH_PATH:=$(TOOLS_PATH)/make_flash_nand
MAKE_FLASH:=$(IMAGE_DIR)/make_flash
IMAGE_BIN_DIR:= $(IMAGE_DIR)/bin
INCLUDE_NAND_FLASH:=y

# Host Tools
HOST_TOOLS_MTK_PATH:=$(TOOLS_PATH)/tools_for_mtk/bin
HOST_TOOLS_PATH:=$(TOOLS_PATH)/make_flash_nand/bin
INCLUDE_FS_NOSTRIP=y

# Image
IMAGE_ROOTFS_DIR:=$(IMAGE_DIR)/rootfs
IMAGE_TMP_DIR:=$(IMAGE_DIR)/tmpfs
MODEL:=A10V1
REGION:=US

# Other 
FLASH_SIZE=8
SQUASHFS_SIZE=

IMAGE_NAME_PREFIX=A10V1

